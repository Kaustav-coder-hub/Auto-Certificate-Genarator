{% extends 'base.html' %}
{% block title %}Certificate Verification Portal - Verify Your Certificates{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modern-index.css') }}">
{% endblock %}

{% block content %}
<div class="hero-container">
    <!-- Hero Section -->
    <div class="hero-section" data-aos="fade-up">
        <h1 class="hero-title">Certificate Verification Portal</h1>
        <p class="hero-subtitle">
            Instantly verify and download your participation certificates with our secure, AI-powered verification system
        </p>
        
        <div class="hero-badges">
            <span class="badge">
                <span class="badge-icon">‚ö°</span>
                <span>Instant Verification</span>
            </span>
            <span class="badge">
                <span class="badge-icon">üîí</span>
                <span>Secure & Encrypted</span>
            </span>
            <span class="badge">
                <span class="badge-icon">üåê</span>
                <span>Global Access</span>
            </span>
        </div>
    </div>

    <!-- Verification Card -->
    <div class="verification-card" data-aos="fade-up" data-aos-delay="200">
        <div class="verification-header">
            <h2>Verify Your Certificate</h2>
            <p>Enter your details to verify and download your certificate</p>
        </div>

        <form method="post" id="verifyForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

            <div class="verify-form-group">
                <label for="email">üìß Email Address</label>
                <input type="email" 
                       id="email" 
                       name="email" 
                       class="verify-input"
                       required 
                       placeholder="Enter your registered email"
                       value="{{ request.form.get('email', '') }}"
                       autocomplete="email">
            </div>

            <div class="verify-form-group">
                <label for="event">üéØ Select Event</label>
                <select id="event" name="event" class="verify-select" required>
                    <option value="">Choose your event</option>
                    {% for event in events %}
                        <option value="{{ event }}" 
                                {% if request.form.get('event') == event %}selected{% endif %}>
                            {{ event }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" class="verify-button" id="submitBtn">
                <span>Verify Certificate</span>
            </button>
        </form>

        <!-- Results Area -->
        {% if error %}
        <div class="result-card result-error" data-aos="fade-up">
            <div class="result-header">
                <span class="result-icon">‚ùå</span>
                <h3 class="result-title">Certificate Not Found</h3>
            </div>
            <div class="result-content">
                {{ error }}
            </div>
            <div class="result-actions">
                <button class="result-button result-button-secondary" onclick="location.reload()">
                    Try Again
                </button>
            </div>
        </div>
        {% endif %}

        {% if cert_link %}
        <div class="result-card result-success" data-aos="fade-up">
            <div class="result-header">
                <span class="result-icon">‚úÖ</span>
                <h3 class="result-title">Certificate Found!</h3>
            </div>
            <div class="result-content">
                Your certificate has been verified successfully. You can now download or preview it.
            </div>
            <div class="result-actions">
                <a href="{{ cert_link }}" class="result-button result-button-primary" target="_blank" rel="noopener">
                    üì• Download Certificate
                </a>
                {% if preview_link %}
                <a href="{{ preview_link }}" class="result-button result-button-secondary" target="_blank" rel="noopener">
                    üëÅÔ∏è Preview
                </a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Features Section -->
    <div class="features-section" data-aos="fade-up" data-aos-delay="400">
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üéì</div>
                <h3 class="feature-title">Multiple Events</h3>
                <p class="feature-description">
                    Verify certificates from various workshops, courses, and events all in one place
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3 class="feature-title">Instant Access</h3>
                <p class="feature-description">
                    Get your certificates immediately after verification with no waiting time
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üîê</div>
                <h3 class="feature-title">Secure System</h3>
                <p class="feature-description">
                    Military-grade encryption ensures your data and certificates are always protected
                </p>
            </div>
        </div>
    </div>

    <!-- Stats Section -->
    <div class="stats-section" data-aos="fade-up" data-aos-delay="600">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number" data-counter="5000">0</div>
                <div class="stat-label">Certificates Issued</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" data-counter="150">0</div>
                <div class="stat-label">Events Hosted</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" data-counter="98">0</div>
                <div class="stat-label">Success Rate %</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="home-footer">
        <p>
            Need to generate bulk certificates? 
            <a href="{{ url_for('login') }}">Admin Login</a>
        </p>
        <p style="margin-top: 16px; opacity: 0.7;">
            ¬© 2025 Certificate Management Portal ‚Ä¢ Secure ‚Ä¢ Fast ‚Ä¢ Reliable
        </p>
    </div>
</div>

<script>
// Form submission with loading state
document.getElementById('verifyForm').addEventListener('submit', function(e) {
    const btn = document.getElementById('submitBtn');
    btn.classList.add('loading');
    btn.disabled = true;
});

// Form focus effects
document.querySelectorAll('.verify-input, .verify-select').forEach(input => {
    input.addEventListener('focus', () => {
        input.closest('.verify-form-group').classList.add('focused');
    });
    
    input.addEventListener('blur', () => {
        if (!input.value) {
            input.closest('.verify-form-group').classList.remove('focused');
        }
    });
});
</script>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}