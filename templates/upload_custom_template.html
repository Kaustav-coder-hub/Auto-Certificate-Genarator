{% extends 'base.html' %}
{% block title %}Upload Custom Template{% endblock %}
{% block content %}
<div class="container" style="max-width:800px;margin:50px auto;">
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
		<h1 style="margin: 0;">ğŸ–¼ï¸ Upload Custom Certificate Template</h1>
		<a href="{{ url_for('admin_logout') }}" style="padding:10px 20px;background:#ef4444;color:white;text-decoration:none;border-radius:8px;font-weight:600;">ğŸšª Logout</a>
	</div>
	<p style="color:#555;">Provide a new certificate background image (PNG/JPEG). This will be available for bulk generation.</p>
	<form id="customTemplateForm" enctype="multipart/form-data" style="margin-top:24px;">
		<label style="display:block;margin-bottom:12px;font-weight:600;">Template Image
			<input type="file" name="template" accept="image/png,image/jpeg" required style="display:block;margin-top:6px;">
		</label>
		<label style="display:block;margin-bottom:12px;font-weight:600;">Template Name
			<input type="text" name="name" placeholder="e.g. Classic Gold" required style="display:block;margin-top:6px;width:300px;">
		</label>
		<button class="btn" type="submit">Upload Template</button>
	</form>
	<div id="uploadStatus" style="margin-top:18px;font-weight:600;color:#2563eb;"></div>
	<div style="margin-top:30px;">
		<a class="btn" href="{{ url_for('admin_dashboard') }}">â† Back to Dashboard</a>
	</div>
</div>
{% endblock %}
{% block extra_js %}
<script>
	document.getElementById('customTemplateForm').addEventListener('submit', async (e) => {
		e.preventDefault();
		const form = e.target;
		const statusEl = document.getElementById('uploadStatus');
		statusEl.textContent = 'Uploading...';
		const data = new FormData(form);
		// Placeholder endpoint - adjust when backend route exists
		try {
			const res = await fetch('/admin/upload-template', { method: 'POST', body: data });
			if (res.ok) {
				statusEl.textContent = 'Template uploaded successfully!';
				form.reset();
			} else {
				statusEl.textContent = 'Upload failed.';
			}
		} catch (err) {
			statusEl.textContent = 'Network error: ' + err.message;
		}
	});
</script>
{% endblock %}
